<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spirit Tree Radio</title>
    <style>
        body {
            background-color: #1a1a1a;
            color: #00ff00;
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
        .container {
            text-align: center;
            border: 2px solid #00ff00;
            padding: 40px;
            border-radius: 15px;
            background: #000;
            box-shadow: 0 0 20px #00ff00;
        }
        button {
            background: #00ff00;
            color: #000;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 20px;
        }
        button:hover {
            background: #00cc00;
        }
        #track-info {
            margin-top: 20px;
            font-size: 1rem;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>SPIRIT TREE RADIO</h1>
    <div id="track-info">READY TO PLAY</div>
    <button id="play-btn">START RADIO</button>
</div>

<script>
    // 1. SETUP PLAYLIST
    // Ensure these files exist in your /assets folder on GitHub/Vercel
    const playlist = [
        { name: "After Light", src: "assets/After_Light_mastered.mp3" },
        { name: "Get Away", src: "assets/Get_Away_mastered.mp3" },
        { name: "Half of Me", src: "assets/Half_of_Me_mastered.mp3" },
        { name: "W.D.I.D.", src: "assets/WDID.mp3" }
    ];

    let currentTrackIndex = 0;
    let isPlaying = false;

    // 2. CREATE AUDIO ELEMENT
    const audio = new Audio();
    const playBtn = document.getElementById('play-btn');
    const trackLabel = document.getElementById('track-info');

    // 3. TOGGLE PLAY/PAUSE FUNCTION
    async function toggleMusic() {
        // Load first track if none is loaded
        if (!audio.src || audio.src === "") {
            loadTrack(currentTrackIndex);
        }

        try {
            if (!isPlaying) {
                await audio.play();
                isPlaying = true;
                playBtn.textContent = "PAUSE RADIO";
                trackLabel.textContent = "NOW PLAYING: " + playlist[currentTrackIndex].name;
            } else {
                audio.pause();
                isPlaying = false;
                playBtn.textContent = "RESUME RADIO";
            }
        } catch (err) {
            console.error("Playback failed:", err);
            trackLabel.textContent = "ERROR: CLICK AGAIN TO START";
        }
    }

    // 4. LOAD SPECIFIC TRACK
    function loadTrack(index) {
        audio.src = playlist[index].src;
        audio.load();
    }

    // 5. AUTO-PLAY NEXT TRACK
    audio.onended = () => {
        currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
        loadTrack(currentTrackIndex);
        audio.play().catch(e => console.log("Auto-next blocked"));
        trackLabel.textContent = "NOW PLAYING: " + playlist[currentTrackIndex].name;
    };

    // 6. EVENT LISTENER
    playBtn.addEventListener('click', toggleMusic);

</script>
</body>
</html>
